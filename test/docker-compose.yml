version: '3'

services:
  jmeter-master:
    image: kamalyes/jmeter:v1.0.0
    command: master
    container_name: jmeter-master
    tty: true
    ports:
      - 60000:60000
    volumes:
      - "../sample_test/:/jmeter/sample_test/"
    networks:
      - jmeter-network

  jmeter-slave1:
    image: kamalyes/jmeter:v1.0.0
    command: server
    container_name: jmeter-slave1
    tty: true
    ports:
      - 1099:1099
      - 50000:50000
    networks:
      - jmeter-network
    depends_on:
      - master
  
  jmeter-slave2:
    image: kamalyes/jmeter:v1.0.0
    command: server
    container_name: jmeter-slave2
    tty: true
    ports:
      - 1099:1099
      - 50000:50000
    networks:
      - jmeter-network
    depends_on:
      - master

networks:
  jmeter-network:
    driver: bridge
